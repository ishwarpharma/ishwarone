<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‚ú® Ishwar Pharma Order Form ‚ú®</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #f2f9ff;
      color: #333;
    }

    .container {
      padding: 1rem;
    }

    .header, .form-section, .product-section, .cart-section, .footer-section {
      margin-bottom: 1.5rem;
      background: white;
      padding: 1rem;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }

    h1 {
      text-align: center;
      font-size: 1.8rem;
      color: #0077cc;
    }

    input, button, select {
      width: 100%;
      padding: 0.75rem;
      margin: 0.5rem 0;
      font-size: 1.1rem;
      border-radius: 8px;
      border: 1px solid #ccc;
    }

    input[type="number"] {
      -moz-appearance: textfield;
    }

    .product-list {
      max-height: 300px;
      overflow-y: auto;
      margin-top: 0.5rem;
    }

    .product-item {
      padding: 0.75rem;
      border-bottom: 1px solid #eee;
      cursor: pointer;
      background: #f9f9f9;
      border-radius: 5px;
      margin-bottom: 0.5rem;
    }

    .product-item:hover {
      background: #e0f3ff;
    }

    .cart-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }

    .cart-table th, .cart-table td {
      border: 1px solid #ccc;
      padding: 0.5rem;
      text-align: left;
    }

    .finalize-btn {
      background: #28a745;
      color: white;
      border: none;
    }

    .emoji {
      font-size: 1.5rem;
      margin-right: 0.5rem;
    }

    @media (min-width: 768px) {
      input, button, select {
        font-size: 1rem;
      }
    }
  </style>
</head>

<body>
  <div class="container">

    <!-- Header -->
    <div class="header">
      <h1>‚ú® Ishwar Pharma Order Form ‚ú®</h1>
      <p>Date: <span id="today-date"></span></p>
    </div>

    <!-- Salesman Info -->
    <div class="form-section">
      <label><span class="emoji">üíº</span>Salesman Name</label>
      <input type="text" id="salesman-name" placeholder="Enter salesman name">
      <label><span class="emoji">üè¢</span>Party Name</label>
      <input type="text" id="party-name" placeholder="Enter party name">
      <label><span class="emoji">üåç</span>Place</label>
      <input type="text" id="place" placeholder="Enter place">
      <button onclick="startOrdering()">üöÄ Start Ordering</button>
    </div>

    <!-- Product Search -->
    <div class="product-section" style="display:none">
      <label><span class="emoji">üîç</span>Search Product (Brand Company)</label>
      <input type="text" id="search-box" placeholder="Type brand or brand company">
      <div class="product-list" id="product-list"></div>
    </div>

    <!-- Cart -->
    <div class="cart-section" style="display:none">
      <h2>üõí Cart</h2>
      <table class="cart-table" id="cart-table">
        <thead>
          <tr>
            <th>#</th>
            <th>Item</th>
            <th>Qty</th>
            <th>Rate</th>
            <th>SP Rate</th>
            <th>Disc%</th>
            <th>Amt</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <button class="finalize-btn" onclick="finalizeOrder()">üîπ Finalize & Download PDF</button>
    </div>

    <!-- Footer -->
    <div class="footer-section">
      <p style="text-align:center">‚ú® Thank you for choosing Ishwar Pharma! ‚ú®</p>
    </div>
  </div>

  <script>
    document.getElementById('today-date').innerText = new Date().toLocaleDateString();

    function startOrdering() {
      const salesman = document.getElementById('salesman-name').value;
      const party = document.getElementById('party-name').value;
      const place = document.getElementById('place').value;
      if (!salesman || !party || !place) {
        alert('Please fill all fields');
        return;
      }
      document.querySelector('.product-section').style.display = 'block';
      document.querySelector('.cart-section').style.display = 'block';
    }

    const stock = [
      { brand: "Zeroder", company: "Ishwar", rate: 85, mrp: 110 },
      { brand: "Urodiv", company: "Ishwar", rate: 150, mrp: 200 },
      { brand: "AcePro", company: "Maxwell", rate: 95, mrp: 120 },
      { brand: "PainNil", company: "Medly", rate: 40, mrp: 50 }
    ];

    const cart = [];
    const searchBox = document.getElementById("search-box");
    const productList = document.getElementById("product-list");

    searchBox.addEventListener("input", () => {
      const input = searchBox.value.toLowerCase();
      const [brandSearch, companySearch] = input.split(" ");
      const results = stock.filter(item =>
        item.brand.toLowerCase().includes(brandSearch || "") &&
        (!companySearch || item.company.toLowerCase().includes(companySearch))
      );
      productList.innerHTML = results.map(item => `
        <div class="product-item" onclick='selectProduct(${JSON.stringify(item)})'>
          üåø ${item.brand} (${item.company}) - Rs.${item.rate}/- | MRP Rs.${item.mrp}
        </div>
      `).join("");
    });

    function selectProduct(item) {
      const qty = prompt(`Qty for ${item.brand} (Rate Rs.${item.rate}, MRP Rs.${item.mrp})`);
      const disc = prompt("Discount %?");
      const splRate = prompt("Special Rate?");
      const amt = (splRate || item.rate) * qty;
      cart.push({ ...item, qty, disc, splRate, amt });
      updateCart();
      searchBox.value = "";
      productList.innerHTML = "";
    }

    function updateCart() {
      const tbody = document.querySelector("#cart-table tbody");
      tbody.innerHTML = cart.map((item, index) => `
        <tr>
          <td>${index + 1}</td>
          <td>${item.brand}</td>
          <td>${item.qty}</td>
          <td>${item.rate}</td>
          <td>${item.splRate}</td>
          <td>${item.disc}</td>
          <td>${item.amt}</td>
          <td><button onclick='removeItem(${index})'>‚ùå</button></td>
        </tr>
      `).join("");
    }

    function removeItem(index) {
      cart.splice(index, 1);
      updateCart();
    }

    function finalizeOrder() {
      let summary = `‚ú® Ishwar Pharma Order ‚ú®\nDate: ${new Date().toLocaleDateString()}\nSalesman: ${document.getElementById('salesman-name').value}\nParty: ${document.getElementById('party-name').value}\nPlace: ${document.getElementById('place').value}\n\nItems:\n`;
      let total = 0;
      cart.forEach((item, i) => {
        summary += `${i + 1}. ${item.brand} - Qty: ${item.qty}, Rate: ${item.rate}, SP: ${item.splRate}, Disc: ${item.disc}%, Amt: ${item.amt}\n`;
        total += Number(item.amt);
      });
      summary += `\nTotal: Rs.${total.toFixed(2)}`;
      const blob = new Blob([summary], { type: 'text/plain' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = 'order.txt';
      link.click();
    }
  </script>
</body>

</html>